<?xml version="1.0" encoding="utf-8"?>
<odoo>
      <data>

        <template id="website_sale_quickorder.quickorder_script" name="quickorder assets" inherit_id="web.assets_common" >
          <xpath expr="//script[last()]" position="after">
            <link rel="stylesheet" type="text/css" href="/website_sale_quickorder/static/src/css/style.css" />
            <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
            <script type="text/javascript" src="/website_sale_quickorder/static/src/js/quickorder.js"></script>
            </xpath>
        </template>

        <template id="website_sale_quickorder.header" name="Website Sale QuickOrder"  inherit_id="portal.frontend_layout">
          <xpath expr="//div[@id='top_menu_collapse']//ul//li[1]" position="before">
            <li class="nav-item">
              <a role="menuitem" href="/my/quick-order" class="nav-link ">
                  <span>Quick order</span>
              </a>
            </li>
            <li class="nav-item">
              <a role="menuitem" href="/quickorder/shoppinglist" class="nav-link ">
                  <span>Shopping Lists</span>
              </a>
            </li>
          </xpath>
        </template>

        <template id="website_sale_quickorder.portal_my_home_menu_sale" name="Portal layout : sales menu entries" inherit_id="portal.portal_breadcrumbs" priority="20">
            <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
                <li t-if="page == 'quickorder'" t-attf-class="breadcrumb-item #{'active ' if not sale_order else ''}">
                    <t>Quick Order</t>
                </li>
            </xpath>
        </template>

        <template id="website_sale_quickorder.search" name="Quick Order Search" inherit_id="website_sale.website_sale_products_search_box" primary="True">
          <xpath expr="//input[@name='search']" position="attributes">
            <attribute name="class">quick-search form-control oe_search_box </attribute>
          </xpath>
        </template>

        <template id="website_sale_quickorder.index" name="Quick order" >
          <t t-call="website.layout">
            <t t-set="additional_title">Quick Order</t>
            <div class="container">
              <div class="my-4">
                <t t-call="website_sale_quickorder.portal_my_home_menu_sale" />
              </div>
              <div class="my-4">
                <h4> Quick order</h4>
              </div>

              <div class="col-md-12 my-3 d-flex justify-content-between">
                <div class="w3-dropdown-hover">
                   <button class="btn btn-secondary">Copy from Shopping List </button>
                   <div class="w3-dropdown-content w3-bar-block w3-border">
                     <t t-foreach="shopping_lists" t-as="i">
                       <a t-att-href="('/quickorder/shoplist-item?id=%s' % i.id)">
                         <button class="w3-bar-item w3-button" t-att-data-id="i.id"><t t-esc="i.name"/></button>
                        </a>
                     </t>
                   </div>
                 </div>
                 <a href="/quickorder/shoppinglist">
                  <button class="btn btn-primary"> Go To Shoping Lists </button>
                 </a>
              </div>

              <t t-call="website_sale_quickorder.search" />

              <div class="row my-3 bg-light">
                <div class="col-lg-8 sm-6 md-6">
                  <div class="p-3">
                    <div class="table-responsive">
                      <table class="table table-hover top-middle" id="quick-order-table">
                        <thead>
                          <th>
                            Item #
                          </th>
                          <th>
                            Qty
                          </th>
                          <th>
                            Unit
                          </th>
                          <th>
                            Price
                          </th>
                          <th>
                          </th>
                        </thead>
                        <tbody>
                          <t t-if="quickorder.quick_order_line" >
                          <t t-foreach="quickorder.quick_order_line" t-as="line">
                          <tr t-att-data-id="line.product_id.id" t-att-data-value="line.id">
                                <td class="d-flex">
                                  <img t-att-src="('/web/image/product.product/%s/image_128' % line.product_id.id)" class="flex-shrink-0 o_image_64_contain" />
                                  <span class="ml-2"><t t-esc="line.product_id.name" /></span>
                                </td>
                                <td>
                                <div class="quickorder-qty css_quantity input-group" contenteditable="false">
                                    <div class="input-group-prepend">
                                        <a href="javascript:void(0)" class="btn btn-secondary js_add_cart_json decrement" aria-label="Remove one" title="Remove one">
                                            <i class="fa fa-minus text-light"></i>
                                        </a>
                                    </div>
                                    <input type="number" class="form-control quantity" data-min="1" name="add_qty" t-att-value="line.quantity" />
                                    <div class="input-group-append">
                                        <a href="javascript:void(0)" class="btn btn-secondary float_left js_add_cart_json increment" aria-label="Add one" title="Add one">
                                            <i class="fa fa-plus text-light"></i>
                                        </a>
                                    </div>
                                </div>
                                </td>
                                <td>
                                  100
                                </td>
                                <td>
                                  $ <t t-esc="line.product_id.lst_price" />
                                </td>
                                <td>
                                  <button type="button" class="btn btn-danger btn-circle remove"> <i class="fa fa-times" ></i> </button>
                                </td>
                            </tr>
                        </t>
                        </t>
                        <t t-else="">
                          <tr class="first-tr">
                            <td colspan="5">
                              <h3 class="my-3 text-center">
                                No products available
                              </h3>
                            </td>
                          </tr>
                        </t>
                        </tbody>
                      </table>
                    </div>
                    <div class="d-flex justify-content-end mt-4 all-btns">
                      <button class="btn btn-warning float-right"> <i class="fa fa-tag mr-2" ></i>Get Quote </button>
                      <button class="btn btn-secondary float-right mx-3">  <i class="fa fa-clipboard mr-2" /> Create Order </button>
                      <button class="btn btn-primary float-right add-to-cart mx-3"> <i class="fa fa-shopping-cart mr-2"></i> Add to Cart </button>
                      <div class="w3-dropdown-hover">
                         <button class="btn btn-secondary"> Add to shopping list </button>
                         <div class="w3-dropdown-content w3-bar-block w3-border shoplist-btns">
                           <t t-foreach="shopping_lists" t-as="i">
                             <button class="w3-bar-item w3-button shoplist-btn" t-att-data-id="i.id"><t t-esc="i.name"/></button>
                           </t>
                           <button class="w3-bar-item w3-button" data-toggle="modal" data-target="#exampleModal"> Add new list </button>
                         </div>
                       </div>
                    </div>

                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Add new shopping list</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <i class="fa fa-times"></i>
                            </button>
                          </div>
                          <div class="modal-body">
                            <label> List name </label>
                            <input type="text" name="name" placeholder="Enter the list name" class="form-control" />
                            <input type="hidden" name="quickorder" t-att-value="quickorder.id" />
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" id="add-shop" class="btn btn-primary">Save changes</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 sm-6 md-6 py-3 ">
                  <h5 class="my-2 py-2"> <i class="fa fa-link mr-3" ></i>  Upload Your Order </h5>
                  <div class="pa-4 text-center p-3 bg-lgrey">
                    <p class="text-center"> Drag and drop CSV, .XLS or .ODF file here, <br />
                       or select them from your computer.</p>
                       <p class="text-center"> Get Directions </p>
                       <div class="file-upload btn btn-secondary">
            							Upload
            							<input type="file" name="file"/>
            						</div>
                  </div>
                  <h5 class="my-2 py-2"> <i class="fa fa-clipboard mr-3"></i>  Paste Your Order </h5>
                  <div class="pa-4 p-3">
                    <p> Copy and paste your order  with the item #. quantity ( and optionally units ), separated by spaces, semicolons or commas.</p>
                    <textarea rows="5" class="p-3 w-100" placeholder="Copy and paste your order" />
                    <button class="btn btn-primary float-right mt-3"> Verify Order </button>
                  </div>
                </div>
              </div>
            </div>
          </t>
        </template>


        <!-- ====================== New data ============================= -->

        <template id="add_to_shopping_list_model">
          <div class="modal modal-setName fade">
            <div class="modal-dialog modal-sm">
              <div class="modal-content">
                   <div class="modal-header">
                      <h4 class="mb-0">Create Shopping List</h4>
                      <button type="button" class="close close-m" data-dismiss="modal"><span class="fa fa-times" /></button>
                   </div>
                  <div class="modal-body">
                    <label><strong>Shopping List Name</strong></label>
                    <input type="text" class="form-control" placeholder="enter shopping list name" id="shopping_list_name" autofocus="true"/>
                    <p class="null_name_shopping_list alert alert-danger mb-0 mt-2" style="display: none;">Please provide a name to the Shopping list</p><br/>

                  </div>
                  <div class="modal-footer">
                    <button class="btn btn-primary" style="margin-left:14px;" id="submit_shopping_cart">Submit</button>
                    <button type="button" class="btn btn-secondary close-m" data-dismiss="modal">Cancel</button>
                  </div>
              </div>
            </div>
          </div>
        </template>

        <template id="shopping_list_button">
            <div class="dropdown dropdown-button" >
               <a style="text-decoration: none; padding: 0px !important;" href="#" data-toggle="dropdown" class="btn btn-drp dropdown-toggle">
                 <div class="btn-group">
                   <button type="button" class="btn btn-gp">Add To Shopping List</button>
                   <button type="button" class="btn btn-gp"><i class="fa fa-chevron-down"></i></button>
                 </div>
               </a>
               <ul class="dropdown-menu custom-scroll-bar">
                 <t t-foreach="shopping_list" t-as="user">
                   <li id="create_new_sp_list" class="create_new_list" t-att-value="user.id"><t t-esc="user.name" /></li>
                 </t>
                   <li id="create_new_sp_list" class="last-li create add-list create_new_list"><div>+ Create new shopping list</div></li>
               </ul>
             </div>
        </template>

        <template id="shopping_list_hover_button">
          <div class="hover_button">
            <div class="dropdown dropdown-button" >
               <a href="/quickorder/shoppinglist" class="dropdown-hover">
                 <div class="btn-group">
                   <button type="button" class="btn btn-warning">Shopping List</button>
                   <button type="button" class="btn btn-warning hover-single-fa"><i class="fa fa-chevron-down" ></i></button>
                 </div>
               </a>
               <t t-call="website_sale_quickorder.shopping_cart" />
             </div>
          </div>
        </template>

        <template id="shopping_cart">
          <ul class="dropdown-menu dropdown-hover custom-scroll-bar" style="max-height: 250px;" id="ul_append" >
            <li t-if="not shopping_list" style="text-align:center;">
              <label>Your Shopping List is empty</label>
            </li>
            <t t-foreach="shopping_list" t-as="user">
              <li id="create_new_sp_list" t-att-value="user.id">
                <div class="li-content">
                  <label><t t-esc="user.name" /></label>
                  <div class="row">
                    <div><t t-esc="sum([x.quantity for x in user.quick_order_line])" /> items</div>
                    <label  style="color:#428bca;">|</label>
                    <!-- <div class="li-right"><t t-esc="sum([compute_currency(p._get_product_price()) for p in user.quick_order_line])" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" /></div> -->
                  </div>
                  <div><a t-att-href="'/quickorder/shoppinglist/%s'%(user.id)" >View Details</a></div>
                </div>
              </li>
            </t>
          </ul>
        </template>

        <template id="website_sale_quickorder.shoplistbreadcum" name="Portal layout : sales menu entries" inherit_id="portal.portal_breadcrumbs" priority="20">
            <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
                <li t-if="page == 'shoplist'" t-attf-class="breadcrumb-item #{'active ' if not sale_order else ''}">
                    <t>Shop List</t>
                </li>
            </xpath>
        </template>

        <template id="shopping_list">
          <t t-call="website.layout">
            <t t-set="additional_title">Shopping List</t>
            <div class="container container-text">
              <div class="my-4">
                <t t-call="website_sale_quickorder.shoplistbreadcum" />
              </div>
              <div class="my-4">
                <h4> Shopping list </h4>
              </div>
             <div class="row my-3">
               <div class="col-lg-8 sm-6 md-6">
                 <div class="p-3">
                   <div class="table-responsive bg-light">
                     <table class="table table-hover top-middle" id="shoping-table">
                       <thead>
                         <th>
                           Name #
                         </th>
                         <th>
                           items
                         </th>
                         <th class="text-center">
                           Actions
                         </th>
                       </thead>
                       <tbody>
                         <t t-if="shopping_lists" >
                           <t t-foreach="shopping_lists" t-as="shopping_list">
                           <tr>
                               <td>
                                  <t t-esc="shopping_list.name" />
                               </td>
                               <td>
                                 <t t-esc="len(shopping_list.quick_order_line)" />
                               </td>
                               <td class="text-center">
                                 <a t-att-href="('/quickorder/shopping-item?shop_id=%s' % shopping_list.id)">
                                 <button type="button" class="btn btn-primary btn-circle" title="View items"> <i class="fa fa-eye" ></i> </button>
                                 </a>
                                   <button t-att-data-id="shopping_list.id" t-att-data-name="shopping_list.name" type="button" class="btn edit-shop btn-secondary mx-3 btn-circle" title="Edit"> <i class="fa fa-pencil" ></i> </button>
                                 <a t-att-href="('/quickorder/shoppinglist/delete?shopping_id=%s' % shopping_list.id)">
                                   <button type="button" class="btn btn-danger btn-circle remove" title="Delete"> <i class="fa fa-times" ></i> </button>
                                 </a>
                               </td>
                            </tr>
                         </t>
                       </t>
                       <t t-else="">
                         <tr class="first-tr">
                           <td colspan="3">
                             <h3 class="my-3 text-center">
                               No Shopping lists are created.
                             </h3>
                           </td>
                         </tr>
                       </t>
                       </tbody>
                     </table>
                   </div>

                   <div class="modal fade editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                     <div class="modal-dialog" role="document">
                       <div class="modal-content">
                         <div class="modal-header">
                           <h5 class="modal-title" id="exampleModalLabel">Edit shopping list</h5>
                           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                             <i class="fa fa-times"></i>
                           </button>
                         </div>
                         <form action="/quickorder/shoppinglist/edit" method="post">
                           <div class="modal-body">
                             <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                             <label> List name </label>
                             <input type="text" name="name" placeholder="Enter the list name" class="form-control" />
                             <input type="hidden" name="shop_id" />
                           </div>
                           <div class="modal-footer">
                             <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                             <button type="submit" class="btn btn-primary">Save changes</button>
                           </div>
                         </form>
                       </div>
                     </div>
                   </div>

                 </div>
               </div>
             </div>
            </div>
          </t>
        </template>

        <template id="website_sale_quickorder.shoplistitembreadcum" name="Portal layout : sales menu entries" inherit_id="portal.portal_breadcrumbs" priority="20">
            <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
              <t t-if="item">
                <li t-attf-class="breadcrumb-item">
                  <a href="/quickorder/shoppinglist">Shop List</a>
                </li>
                <li t-attf-class="breadcrumb-item #{'active ' if not sale_order else ''}">
                    <t t-if="item" t-esc="item.name" />
                </li>
             </t>
            </xpath>
        </template>

        <template id="shoplist_item">
          <t t-call="website.layout">
            <t t-set="additional_title"><t t-if="item" t-esc="item.name" /></t>
            <div class="container container-text">
              <div class="my-4">
                <t t-call="website_sale_quickorder.shoplistitembreadcum" />
              </div>
              <div class="my-4">
                <h4> <t t-if="item" t-esc="item.name" /> </h4>
              </div>
              <div class="table-responsive">
                <table class="table table-hover top-middle" id="quick-order-table">
                  <thead>
                    <th>
                      Item #
                    </th>
                    <th>
                      Qty
                    </th>
                    <th>
                      Unit
                    </th>
                    <th>
                      Price
                    </th>
                    <th>
                    </th>
                  </thead>
                  <tbody>
                    <t t-if="item.quick_order_line" >
                    <t t-foreach="item.quick_order_line" t-as="line">
                    <tr t-att-data-id="line.product_id.id" t-att-data-value="line.id">
                          <td class="d-flex">
                            <img t-att-src="('/web/image/product.product/%s/image_128' % line.product_id.id)" class="flex-shrink-0 o_image_64_contain" />
                            <span class="ml-2"><t t-esc="line.product_id.name" /></span>
                          </td>
                          <td>
                          <div class="quickorder-qty css_quantity input-group" contenteditable="false">
                              <div class="input-group-prepend">
                                  <a href="javascript:void(0)" class="btn btn-secondary js_add_cart_json decrement" aria-label="Remove one" title="Remove one">
                                      <i class="fa fa-minus text-light"></i>
                                  </a>
                              </div>
                              <input type="number" class="form-control quantity" data-min="1" name="add_qty" t-att-value="line.quantity" />
                              <div class="input-group-append">
                                  <a href="javascript:void(0)" class="btn btn-secondary float_left js_add_cart_json increment" aria-label="Add one" title="Add one">
                                      <i class="fa fa-plus text-light"></i>
                                  </a>
                              </div>
                          </div>
                          </td>
                          <td>
                            100
                          </td>
                          <td>
                            $ <t t-esc="line.product_id.lst_price" />
                          </td>
                          <td>
                            <button type="button" class="btn btn-danger btn-circle remove"> <i class="fa fa-times" ></i> </button>
                          </td>
                      </tr>
                  </t>
                  </t>
                  <t t-else="">
                    <tr class="first-tr">
                      <td colspan="5">
                        <h3 class="my-3 text-center">
                          No products available
                        </h3>
                      </td>
                    </tr>
                  </t>
                  </tbody>
                </table>
              </div>
            </div>
          </t>
        </template>
        <template id="404">
          <div class="panel-create alert-error">
            <div class="" style="text-align:center;">
              <br/><br/><br/>
              <p><t t-esc="error['s_error']" /></p>
            </div>
          </div>
         </template>
      </data>
</odoo>
